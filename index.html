<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CRICFy-style Live ‚Äî Demo</title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<style>
  /* ========== Theme (mobile-first) ========== */
  :root{
    --bg:#0f1114;
    --surface:#111214;
    --card:#0f1416;
    --accent:#18c36b;
    --danger:#ff5a5a;
    --muted:#9aa0a6;
    --text:#e8eef0;
    --glass: rgba(255,255,255,0.02);
    --radius:12px;
    --shadow: 0 6px 18px rgba(0,0,0,0.6);
    font-family: Inter, ui-sans-serif, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#0b0c0d 0%,var(--bg) 100%);color:var(--text);-webkit-font-smoothing:antialiased;min-height:100vh;}
  .wrap{max-width:420px;margin:0 auto;padding:14px 12px 120px;}
  header{display:flex;align-items:center;justify-content:space-between;gap:8px}
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#0e8d56,#14c37a);display:flex;align-items:center;justify-content:center;font-weight:700;color:#072214}
  h1{font-size:16px;margin:0}
  .sub{font-size:12px;color:var(--muted)}

  /* tabs */
  .tabs{display:flex;gap:8px;margin:14px 0;overflow:auto;padding-bottom:6px}
  .tab{padding:7px 12px;border-radius:999px;border:2px solid transparent;background:transparent;color:var(--muted);cursor:pointer;white-space:nowrap;font-size:13px}
  .tab.active{border-color:rgba(24,195,107,0.18);color:var(--text);background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}

  /* filters row icons */
  .controls{display:flex;gap:8px;margin-bottom:10px;align-items:center}
  .control{flex:1;padding:8px;border-radius:10px;background:var(--card);text-align:center;color:var(--muted);font-size:13px;cursor:pointer;border:1px solid rgba(255,255,255,0.02)}

  /* events list */
  .list{display:flex;flex-direction:column;gap:12px}
  .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(24,195,107,0.12);padding:12px;border-radius:var(--radius);box-shadow:var(--shadow);cursor:pointer;display:flex;flex-direction:column;gap:10px}
  .league{font-size:13px;padding:6px 8px;border-radius:8px;background:rgba(0,0,0,0.2);display:inline-block}
  .row{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .teams{display:flex;align-items:center;gap:12px}
  .team{display:flex;flex-direction:column;align-items:center;gap:6px;font-size:13px}
  .logoSmall{width:52px;height:52px;border-radius:8px;background:var(--glass);display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--muted)}
  .metaCol{text-align:right}
  .timeLarge{font-weight:700;font-size:18px}
  .dateSmall{color:var(--accent);font-weight:700;margin-top:4px}
  .muted{color:var(--muted);font-size:13px}

  /* Live badge & blinking */
  .liveBadge{display:inline-block;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,#ff6b6b,#ff2e2e);color:white;font-weight:700;letter-spacing:0.6px}
  .liveBlink{animation:blink 1000ms linear infinite}
  @keyframes blink{0%{opacity:1}50%{opacity:0.25}100%{opacity:1}}

  /* countdown */
  .countdown{font-weight:800;color:var(--accent);font-size:16px}

  /* categories grid */
  .grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  .catCard{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:12px;border-radius:10px;text-align:center;cursor:pointer;border:1px solid rgba(255,255,255,0.02)}

  /* bottom nav */
  .bottomNav{position:fixed;left:0;right:0;bottom:0;background:#111;padding:10px 12px;border-top:1px solid rgba(255,255,255,0.02);display:flex;gap:6px;justify-content:space-between;max-width:420px;margin:0 auto}
  .bnItem{flex:1;text-align:center;padding:8px;border-radius:10px;color:var(--muted);cursor:pointer}
  .bnItem.active{color:var(--accent);background:rgba(24,195,107,0.06);border:1px solid rgba(24,195,107,0.06)}

  /* modal video */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;padding:18px;z-index:60;visibility:hidden;opacity:0;transition:opacity .18s}
  .modal.open{visibility:visible;opacity:1}
  .modalBox{width:100%;max-width:960px;background:#020303;border-radius:12px;padding:10px}
  .closeBtn{position:absolute;right:18px;top:18px;background:#111;padding:8px;border-radius:10px;color:var(--muted);cursor:pointer}
  iframe{width:100%;height:56vw;max-height:560px;border-radius:8px;border:0}
  /* responsive */
  @media(min-width:800px){
    body{background:var(--bg)}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo">CF</div>
      <div>
        <h1>CRICFy-Style Live</h1>
        <div class="sub">Live ‚Ä¢ Upcoming ‚Ä¢ Recent</div>
      </div>
    </div>
    <div style="text-align:right">
      <div class="sub">‡¶∏‡¶ø‡¶®‡¶π‡¶æ</div>
    </div>
  </header>

  <!-- top tabs with dynamic counts -->
  <div class="tabs" id="topTabs" role="tablist">
    <div class="tab active" data-filter="all">All (0)</div>
    <div class="tab" data-filter="live">Live (0)</div>
    <div class="tab" data-filter="recent">Recent (0)</div>
    <div class="tab" data-filter="upcoming">Upcoming (0)</div>
  </div>

  <!-- quick controls -->
  <div class="controls">
    <div class="control" id="filterSport">‚öΩ Sports</div>
    <div class="control" id="filterTV">üì∫ Spot TV</div>
    <div class="control" id="refreshBtn">üîÑ Refresh</div>
  </div>

  <!-- main content area -->
  <main id="contentArea"></main>
</div>

<!-- Video Modal -->
<div class="modal" id="videoModal" aria-hidden="true">
  <div class="modalBox" role="dialog" aria-modal="true">
    <div style="position:relative">
      <div class="closeBtn" id="modalClose">‚úï</div>
    </div>
    <iframe id="player" src="" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen></iframe>
  </div>
</div>

<!-- bottom nav -->
<nav class="bottomNav" role="navigation" aria-label="main nav">
  <div class="bnItem active" data-section="events">Live Events</div>
  <div class="bnItem" data-section="sports">Sports</div>
  <div class="bnItem" data-section="categories">Spot TV</div>
</nav>

<script>
/* ========= Sample data =========
  - ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá startTime/endTime => ISO 8601 (local)
  - link => ‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ ‡¶è‡¶Æ‡ßç‡¶¨‡ßá‡¶° URL ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶è‡¶Æ‡ßç‡¶¨‡ßá‡¶°‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø URL (Full/embed)
*/
const EVENTS = [
  {
    id: 101,
    league: "Football | Liga Portugal Betclic",
    leftTeam: "Casa Pia", leftLogo: "CP",
    rightTeam: "Sporting", rightLogo: "SCP",
    startTime: "2025-08-09T13:00:00", // local time string
    endTime:   "2025-08-09T14:30:00",
    link: "https://www.youtube.com/embed/dQw4w9WgXcQ",
    channelId: "sports-tv"
  },
  {
    id: 102,
    league: "Cricket | New Zealand in Zimbabwe",
    leftTeam: "ZIM", leftLogo: "Z",
    rightTeam: "NZ", rightLogo: "NZ",
    startTime: "2025-08-09T16:00:00",
    endTime:   "2025-08-09T20:00:00",
    link: "https://www.youtube.com/embed/tVj0ZTS4WF4",
    channelId: "sports-tv"
  },
  {
    id: 103,
    league: "WWE | Friday Night SmackDown",
    leftTeam: "SmackDown", leftLogo: "SD",
    rightTeam: "SmackDown", rightLogo: "SD",
    startTime: "2025-08-09T06:00:00",
    endTime:   "2025-08-09T08:30:00",
    link: "https://www.youtube.com/embed/3JZ_D3ELwOQ",
    channelId: "entertainment-tv"
  },
  {
    id: 104,
    league: "Friendly | Practice Match",
    leftTeam: "ECA", leftLogo: "E",
    rightTeam: "SUN", rightLogo: "S",
    startTime: "2025-07-01T10:00:00",
    endTime:   "2025-07-01T12:00:00",
    link: "https://www.youtube.com/embed/9bZkp7q19f0",
    channelId: "sports-tv"
  }
];

const SPOT_TV = [
  { id: 'sports-tv', name: 'T Sports', link: '#' },
  { id: 'sony-sports', name: 'Sony Sports 1', link: '#' },
  { id: 'star-sports', name: 'Star Sports', link: '#' },
  { id: 'entertainment-tv', name: 'WWE Channel', link: '#' }
];

/* ========= App State ========= */
let events = JSON.parse(JSON.stringify(EVENTS)); // shallow copy to mutate statuses
const contentArea = document.getElementById('contentArea');
const topTabs = document.getElementById('topTabs');

/* Helper: parse local ISO-like string to Date (assumes given string without timezone is local) */
function parseLocalISO(s){
  // If already has timezone (Z or +), Date can parse it normally.
  if(/Z|[+\-]\d\d:\d\d$/.test(s)) return new Date(s);
  // treat as local:
  const parts = s.split(/[-T:]/).map(Number);
  return new Date(parts[0], parts[1]-1, parts[2], parts[3]||0, parts[4]||0, parts[5]||0);
}

/* Update each event.status based on current time:
   - "upcoming": now < start
   - "live": start <= now <= end
   - "recent": now > end
*/
function refreshStatuses(){
  const now = new Date();
  events.forEach(ev=>{
    const start = parseLocalISO(ev.startTime);
    const end = parseLocalISO(ev.endTime);
    if(now < start) ev.status = 'upcoming';
    else if(now >= start && now <= end) ev.status = 'live';
    else ev.status = 'recent';
  });
}

/* Compute counts for tabs and update labels */
function updateTabCounts(){
  const all = events.length;
  const live = events.filter(e=>e.status==='live').length;
  const recent = events.filter(e=>e.status==='recent').length;
  const upcoming = events.filter(e=>e.status==='upcoming').length;
  const map = { all, live, recent, upcoming };
  topTabs.querySelectorAll('.tab').forEach(tab=>{
    const f = tab.dataset.filter;
    tab.textContent = f.charAt(0).toUpperCase() + f.slice(1) + ` (${map[f]||0})`;
  });
}

/* Render event cards (list) */
function renderEvents(list){
  if(!list || !list.length){
    contentArea.innerHTML = `<div class="muted" style="padding:18px;text-align:center">‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</div>`;
    return;
  }
  const html = list.map(ev=>{
    const start = parseLocalISO(ev.startTime);
    const end = parseLocalISO(ev.endTime);
    // Determine display string for time/date
    const now = new Date();
    let statusHTML = '';
    if(ev.status === 'live'){
      const remaining = Math.max(0, Math.floor((end - now)/1000));
      const mm = Math.floor(remaining/60), ss = remaining % 60;
      statusHTML = `<div><span class="liveBadge liveBlink">LIVE</span></div>
                    <div class="muted" style="margin-top:6px">Ends in <strong>${String(mm).padStart(2,'0')}:${String(ss).padStart(2,'0')}</strong></div>`;
    } else if(ev.status === 'upcoming'){
      const remaining = Math.max(0, Math.floor((start - now)/1000));
      const hh = Math.floor(remaining/3600), mm = Math.floor((remaining%3600)/60), ss = remaining%60;
      statusHTML = `<div class="countdown">${String(hh).padStart(2,'0')}:${String(mm).padStart(2,'0')}:${String(ss).padStart(2,'0')}</div>
                    <div class="muted" style="margin-top:6px">Starts at ${start.toLocaleString()}</div>`;
    } else {
      statusHTML = `<div class="muted">Ended ‚Ä¢ ${new Date(ev.endTime).toLocaleString()}</div>`;
    }

    return `
      <article class="card" data-id="${ev.id}" data-link="${ev.link}">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div class="league">${ev.league}</div>
          ${ev.status==='live' ? `<div style="font-size:12px;color:var(--muted)">Live Now</div>` : `<div class="muted">${new Date(ev.startTime).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})}</div>`}
        </div>

        <div class="row" style="align-items:center">
          <div class="teams">
            <div class="team">
              <div class="logoSmall">${ev.leftLogo}</div>
              <div style="font-weight:700;margin-top:6px">${ev.leftTeam}</div>
            </div>
            <div style="width:8px"></div>
            <div class="team">
              <div class="logoSmall">${ev.rightLogo}</div>
              <div style="font-weight:700;margin-top:6px">${ev.rightTeam}</div>
            </div>
          </div>

          <div class="metaCol">
            <div class="timeLarge">${new Date(ev.startTime).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})}</div>
            <div class="dateSmall">${new Date(ev.startTime).toLocaleDateString()}</div>
          </div>
        </div>

        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px">
          <div class="muted">#${ev.id}</div>
          <div>${statusHTML}</div>
        </div>
      </article>
    `;
  }).join('');
  contentArea.innerHTML = `<div class="list">${html}</div>`;

  // attach click handlers for opening video
  contentArea.querySelectorAll('.card').forEach(card=>{
    card.addEventListener('click', ()=>{
      const link = card.dataset.link;
      if(link && link !== '#') openPlayer(link);
      else alert('Video link ‡¶®‡ßá‡¶á ‚Äî link ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
    });
  });
}

/* Render Spot TV categories */
function renderSpotTV(){
  const html = SPOT_TV.map(tv=>`
    <div class="catCard" data-id="${tv.id}" data-link="${tv.link}">
      <div style="font-weight:800">${tv.name}</div>
      <div class="muted" style="margin-top:6px">‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶ñ‡ßÅ‡¶≤‡¶¨‡ßá</div>
    </div>`).join('');
  contentArea.innerHTML = `<div style="margin-top:6px" class="grid2">${html}</div>`;
  contentArea.querySelectorAll('.catCard').forEach(c=>{
    c.addEventListener('click', ()=> {
      const link = c.dataset.link;
      if(link && link !== '#') window.open(link,'_blank');
      else alert('‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
    });
  });
}

/* Bottom nav & top tabs interactions */
document.querySelectorAll('.bnItem').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('.bnItem').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    const s = b.dataset.section;
    if(s === 'events'){
      applyActiveTab();
    } else if(s === 'categories'){
      renderSpotTV();
    } else {
      // for 'sports' we can show all events filtered by sports (demo = all)
      applyActiveTab();
    }
  });
});

topTabs.addEventListener('click', (e)=>{
  const t = e.target.closest('.tab');
  if(!t) return;
  topTabs.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
  t.classList.add('active');
  applyActiveTab();
});

document.getElementById('filterTV').addEventListener('click', ()=> {
  document.querySelector('.bnItem[data-section="categories"]').click();
});
document.getElementById('filterSport').addEventListener('click', ()=> {
  document.querySelector('.bnItem[data-section="sports"]').click();
});
document.getElementById('refreshBtn').addEventListener('click', ()=> { tickNow(); });

/* Active tab rendering */
function applyActiveTab(){
  const active = topTabs.querySelector('.tab.active').dataset.filter;
  if(active === 'all') renderEvents(events);
  else renderEvents(events.filter(e => e.status === active));
}

/* Player modal */
const modal = document.getElementById('videoModal');
const player = document.getElementById('player');
const modalClose = document.getElementById('modalClose');

function openPlayer(url){
  // Convert youtube watch?v=... to embed if needed
  try{
    if(url.includes('youtube.com/watch')){
      const u = new URL(url);
      const id = u.searchParams.get('v');
      if(id) url = `https://www.youtube.com/embed/${id}?autoplay=1`;
    }
  }catch(e){}
  player.src = url + (url.includes('?') ? '&autoplay=1' : '?autoplay=1');
  modal.classList.add('open');
  modal.setAttribute('aria-hidden','false');
}
modalClose.addEventListener('click', closePlayer);
modal.addEventListener('click', (e)=>{ if(e.target === modal) closePlayer(); });
function closePlayer(){
  modal.classList.remove('open');
  modal.setAttribute('aria-hidden','true');
  player.src = '';
}

/* ========= Timer loop =========
   - Every 1s update statuses & counts
   - Re-render current view (optimized lightly)
*/
function tickNow(){
  refreshStatuses();
  updateTabCounts();
  // Only re-render visible view
  const visibleSection = document.querySelector('.bnItem.active')?.dataset.section || 'events';
  if(visibleSection === 'categories'){
    // do nothing for categories
  } else {
    applyActiveTab();
  }
}

/* Initialize & auto tick */
refreshStatuses();
updateTabCounts();
applyActiveTab();
setInterval(tickNow, 1000);

/* ========= How to customize =========
  - EVENTS array: add/remove events; set startTime/endTime in local ISO format (YYYY-MM-DDTHH:MM:SS)
  - link: put embed URL (YouTube embed / other embedable player)
  - SPOT_TV: add channel objects {id,name,link}
  - For production you should load events from server (JSON API) and update events[] dynamically
*/

/* Optional: For dev convenience reload events from "server" localStorage (not required) */
</script>
</body>
</html>
