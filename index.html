<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Live Events Auto Update</title>
<style>
body{background:#111;color:#e6eef0;font-family:sans-serif;margin:0;padding:12px;}
.app{max-width:450px;margin:auto;}
header{padding:10px 0;font-weight:bold;font-size:18px;}
.filters{display:flex;gap:6px;margin-bottom:12px;}
.chip{padding:6px 10px;border:1px solid #1ea96b;border-radius:20px;background:#0f2b19;color:#fff;cursor:pointer;font-size:13px;}
.chip.active{background:#1ea96b;color:#000;}
.list{display:flex;flex-direction:column;gap:10px;}
.card{background:#1a1a1a;padding:10px;border-radius:8px;}
.badge-live{background:red;color:white;padding:2px 6px;border-radius:4px;font-size:12px;}
.countdown{color:#5ee3a0;font-size:14px;}
.footer{margin-top:6px;font-size:13px;color:#aaa;}
.bottom-nav{position:fixed;bottom:0;left:0;width:100%;max-width:450px;margin:auto;right:0;background:#222;padding:8px;display:flex;justify-content:space-around;}
.nav-item{color:#bbb;font-size:13px;cursor:pointer;display:flex;flex-direction:column;align-items:center;}
.nav-item.active{color:#fff;}
</style>
</head>
<body>

<div class="app">
<header>CRICFy Style</header>

<!-- Filters -->
<div class="filters">
  <div class="chip active" data-filter="all">All</div>
  <div class="chip" data-filter="live">Live</div>
  <div class="chip" data-filter="recent">Recent</div>
  <div class="chip" data-filter="upcoming">Upcoming</div>
</div>

<!-- List -->
<div id="list" class="list"></div>
</div>

<!-- Bottom Nav -->
<div class="bottom-nav">
  <div class="nav-item active" data-section="events">Live Events</div>
  <div class="nav-item" data-section="sports">Sports</div>
  <div class="nav-item" data-section="categories">Categories</div>
</div>

<script>
// Sample Data (startTime/endTime in milliseconds)
let eventsData = [
  {
    id:1, title:"Casa Pia vs Sporting", type:"upcoming",
    startTime: Date.now() + 5000, // 5 sec later
    endTime: Date.now() + 30000, // 30 sec later
    link:"https://www.youtube.com/embed/dQw4w9WgXcQ"
  },
  {
    id:2, title:"SmackDown", type:"live",
    startTime: Date.now() - 10000,
    endTime: Date.now() + 20000,
    link:"https://www.youtube.com/embed/ysz5S6PUM-U"
  },
  {
    id:3, title:"ZIM vs NZ", type:"recent",
    startTime: Date.now() - 60000,
    endTime: Date.now() - 10000,
    link:"https://www.youtube.com/embed/ScMzIvxBSi4"
  }
];

// State
let currentFilter = "all";
let currentSection = "events";

function render(){
  const list = document.getElementById("list");
  list.innerHTML = "";

  let filtered = eventsData;

  // Section filter
  if(currentSection === "sports"){
    list.innerHTML = "<div>üéØ Sports TV Channels list here...</div>";
    return;
  }
  if(currentSection === "categories"){
    list.innerHTML = "<div>üì∫ IPTV Channel list here...</div>";
    return;
  }

  // Top filter
  if(currentFilter !== "all"){
    filtered = eventsData.filter(ev => ev.type === currentFilter);
  }

  if(filtered.length === 0){
    list.innerHTML = "<div>‡¶ï‡ßã‡¶®‡ßã ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö ‡¶®‡ßá‡¶á</div>";
    return;
  }

  filtered.forEach(ev=>{
    const card = document.createElement("div");
    card.className = "card";

    let status = "";
    if(ev.type === "live"){
      status = `<span class="badge-live">LIVE</span>`;
    } else if(ev.type === "upcoming"){
      let cd = countdown(ev.startTime);
      status = `<span class="countdown">Starts in ${cd}</span>`;
    } else if(ev.type === "recent"){
      status = `<span>Match Ended</span>`;
    }

    card.innerHTML = `
      <div>${ev.title} ${status}</div>
      <div class="footer"><a href="${ev.link}" target="_blank">Watch</a></div>
    `;
    list.appendChild(card);
  });
}

function countdown(startTime){
  let diff = startTime - Date.now();
  if(diff <= 0) return "0s";
  let sec = Math.floor(diff/1000) % 60;
  let min = Math.floor(diff/60000) % 60;
  let hr = Math.floor(diff/3600000);
  return `${hr>0?hr+"h ":""}${min>0?min+"m ":""}${sec}s`;
}

function updateStatuses(){
  const now = Date.now();
  eventsData.forEach(ev=>{
    if(ev.type === "upcoming" && now >= ev.startTime && now < ev.endTime){
      ev.type = "live";
    }
    if(ev.type === "live" && now >= ev.endTime){
      ev.type = "recent";
    }
  });
}

// Filters click
document.querySelectorAll(".chip").forEach(chip=>{
  chip.addEventListener("click", ()=>{
    document.querySelectorAll(".chip").forEach(c=>c.classList.remove("active"));
    chip.classList.add("active");
    currentFilter = chip.dataset.filter;
    render();
  });
});

// Bottom nav click
document.querySelectorAll(".nav-item").forEach(nav=>{
  nav.addEventListener("click", ()=>{
    document.querySelectorAll(".nav-item").forEach(n=>n.classList.remove("active"));
    nav.classList.add("active");
    currentSection = nav.dataset.section;
    render();
  });
});

// Interval update
setInterval(()=>{
  updateStatuses();
  render();
},1000);

// Initial render
render();
</script>
</body>
</html>
