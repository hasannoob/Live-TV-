<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LiveFy TV</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<link id="rmp-dress-code" type="text/css" rel="stylesheet" href="https://cdn.radiantmediatechs.com/rmp/5.9.2/css/rmp-s4.min.css">

<style>
body { background:#000; color:white; margin:0; font-family:Arial,sans-serif; overflow-x:hidden; }
.marquee { width:100%; background:red; text-align:center; padding:5px 0; font-weight:bold; }
.marquee marquee { color:#fff; }
.category { display:flex; justify-content:center; flex-wrap:wrap; margin:10px 0; }
.category button { padding:8px 15px; margin:5px; font-size:14px; cursor:pointer; border:none; border-radius:5px; background:#ff0000; color:#fff; }
.category button:hover { background:#00ff00; }
.scrollmenu { display:flex; overflow-x:auto; padding:10px 0; gap:10px; scroll-behavior:smooth; }
.scrollmenu::-webkit-scrollbar { display:none; }
.scrollmenu img { height:80px; width:80px; border-radius:50%; cursor:pointer; border:2px solid #fff; transition:0.3s; }
.scrollmenu img:hover { transform:scale(1.2); border-color:#00ff00; box-shadow:0 0 15px #ff0000; }
#rmpPlayer { width:100%; height:calc(100vh - 250px); margin:0 auto; display:block; }
.viewer-count { position:absolute; top:10px; right:10px; background:red; padding:5px 10px; border-radius:5px; font-weight:bold; z-index:1000; }
.controls { position:absolute; top:10px; left:10px; z-index:1000; }
.controls button { margin-right:5px; padding:5px 10px; border:none; border-radius:5px; background:#ff0000; color:#fff; cursor:pointer; }
@media screen and (max-width:768px){ #rmpPlayer{height:calc(60vh);} }
</style>
</head>
<body>

<div class="marquee">
  <marquee scrollamount="5">üî¥ Welcome to LiveFy TV ‚Äî Watch Live Sports, Movies, News & Kids Shows ‚ù§Ô∏èüíö</marquee>
</div>

<div class="category">
  <button data-cat="sports">üèè Sports</button>
  <button data-cat="movies">üé¨ Movies</button>
  <button data-cat="news">üì∞ News</button>
  <button data-cat="kids">üßí Kids</button>
</div>

<div class="scrollmenu" id="channels"></div>

<div class="controls">
  <button id="fullscreenBtn">‚õ∂ Fullscreen</button>
  <button id="pipBtn">üñºÔ∏è PIP</button>
</div>

<div class="viewer-count" id="viewerCount">üëÄ 0</div>

<div id="rmpPlayer"></div>

<script src="https://cdn.radiantmediatechs.com/rmp/6.2.0/js/rmp.min.js"></script>

<script>
// Channel data
var channels = {
  sports: [
    {name:"PTV Sports", logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTLKQnYyjRugWFvMa9ngfzT0CLxkcsjNp-wsw&usqp=CAU", url:"https://jk3lz82elw79-hls-live.5centscdn.com/newgeonews/07811dc6c422334ce36a09ff5cd6fe71.sdp/playlist.m3u8"},
    {name:"Ten Sports", logo:"https://upload.wikimedia.org/wikipedia/en/4/4b/Ten_Sports_logo.png", url:"http://mu03ye.wanicelife.com:8880/live/YALM4649/y6q3fhltq/31641.m3u8"}
  ],
  movies: [
    {name:"Movies1", logo:"https://upload.wikimedia.org/wikipedia/en/3/33/Movie_channel_logo.png", url:"https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4"}
  ],
  news: [
    {name:"News1", logo:"https://upload.wikimedia.org/wikipedia/commons/1/1b/News_channel_logo.png", url:"https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4"}
  ],
  kids: [
    {name:"Kids1", logo:"https://upload.wikimedia.org/wikipedia/commons/5/5b/Kids_channel_logo.png", url:"https://sample-videos.com/video123/mp4/720/big_buck_bunny_1mb.mp4"}
  ]
};

// Load category
function loadCategory(cat) {
  $("#channels").html("");
  channels[cat].forEach(c => {
    $("#channels").append(`<img src="${c.logo}" title="${c.name}" onclick="playStream('${c.url}')">`);
  });
}
loadCategory("sports");

// Auto scroll
let scrollInterval = setInterval(() => {
  let container = document.getElementById("channels");
  container.scrollLeft += 1;
  if (container.scrollLeft >= container.scrollWidth - container.clientWidth) container.scrollLeft = 0;
}, 50);

// Change category
$(".category button").click(function() {
  let cat = $(this).data("cat");
  loadCategory(cat);
});

// Radiant Player init
var rmp = new RadiantMP("rmpPlayer");
rmp.init({
  licenseKey: "eHp1dXRtb3Z5cEAxNDkyNDI4",
  skin:"s4",
  autoplay:true,
  hideControls:false,
  isLive:true,
  src:{hls: channels.sports[0].url},
});

// Play function
function playStream(url){
  rmp.setSrc({hls:url});
  rmp.play();
}

// Viewer count (CountAPI)
const viewerEl = document.getElementById("viewerCount");
function updateViewerCount() {
  fetch('https://api.countapi.xyz/hit/awaispirkale/visits')
    .then(res => res.json())
    .then(res => { viewerEl.innerHTML = `üëÄ ${res.value}`; });
}
setInterval(updateViewerCount, 5000);
updateViewerCount();

// Fullscreen
document.getElementById("fullscreenBtn").addEventListener("click", () => {
  let player = document.getElementById("rmpPlayer");
  if (player.requestFullscreen) player.requestFullscreen();
  else if (player.mozRequestFullScreen) player.mozRequestFullScreen();
  else if (player.webkitRequestFullscreen) player.webkitRequestFullscreen();
  else if (player.msRequestFullscreen) player.msRequestFullscreen();
});

// Picture-in-Picture
document.getElementById("pipBtn").addEventListener("click", async () => {
  try {
    let videoEl = rmp.getPlayerElement().querySelector("video");
    if (videoEl !== document.pictureInPictureElement) await videoEl.requestPictureInPicture();
    else await document.exitPictureInPicture();
  } catch(e){ alert("PIP not supported"); }
});
</script>

</body>
</html>
