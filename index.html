<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Live Sports TV Website</title>
<style>
  /* ... (তোমার আগের CSS কোড এখানে থাকবে) ... */
  /* আমি আগে যা দিয়েছি সেটা ঠিক থাকুক */
  * {
    box-sizing: border-box;
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  body {
    background: #121212;
    color: #eee;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header {
    background: #1f1f1f;
    padding: 15px 20px;
    font-weight: 700;
    font-size: 1.5rem;
    color: #0af;
    text-align: center;
    letter-spacing: 2px;
    border-bottom: 2px solid #0af;
  }
  .announcement-wrapper {
    background: #222;
    overflow: hidden;
    white-space: nowrap;
    border-bottom: 2px solid #0af;
  }
  .announcement {
    display: inline-block;
    padding-left: 100%;
    animation: scroll-left 15s linear infinite;
    font-size: 1rem;
    color: #0af;
    user-select: none;
  }
  @keyframes scroll-left {
    0% { transform: translateX(0%); }
    100% { transform: translateX(-100%); }
  }
  .tabs {
    display: flex;
    justify-content: center;
    background: #181818;
    border-bottom: 2px solid #0af;
    padding: 10px 0;
    gap: 30px;
    font-weight: 600;
  }
  .tab {
    position: relative;
    cursor: pointer;
    padding: 8px 18px;
    border-radius: 25px;
    color: #aaa;
    transition: all 0.3s ease;
    user-select: none;
  }
  .tab.active {
    background: #0af;
    color: #121212;
    font-weight: 700;
  }
  .tab .count {
    background: #ff3b3b;
    color: white;
    font-size: 0.75rem;
    border-radius: 50%;
    padding: 2px 7px;
    position: absolute;
    top: -6px;
    right: -10px;
  }
  .cards-container {
    flex-grow: 1;
    padding: 20px;
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  .match-card {
    background: #222;
    border-radius: 15px;
    padding: 15px 20px;
    display: none;
    flex-direction: column;
    gap: 10px;
    box-shadow: 0 0 8px #0af44a66;
    position: relative;
  }
  .match-card.show {
    display: flex;
  }
  .teams {
    display: flex;
    justify-content: space-between;
    font-size: 1.2rem;
    font-weight: 700;
  }
  .vs {
    align-self: center;
    font-size: 1rem;
    font-weight: 600;
    color: #0af;
  }
  .live-animation {
    margin: 0 auto;
    width: 60px;
    height: 10px;
    border-radius: 5px;
    background: linear-gradient(90deg, #0af, #0a0, #0af);
    background-size: 200% 100%;
    animation: live-wave 1.5s linear infinite;
  }
  @keyframes live-wave {
    0% { background-position: 0% 0; }
    100% { background-position: 200% 0; }
  }
  .watch-now {
    background: #0af;
    color: #121212;
    font-weight: 700;
    border: none;
    border-radius: 25px;
    padding: 12px 25px;
    cursor: pointer;
    align-self: center;
    transition: background 0.3s ease;
    font-size: 1rem;
    width: 140px;
  }
  .watch-now:hover:not(:disabled) {
    background: #08c;
  }
  .watch-now:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  .countdown {
    font-size: 1rem;
    font-weight: 600;
    text-align: center;
    color: #0af;
    user-select: none;
  }
  nav {
    background: #181818;
    border-top: 2px solid #0af;
    display: flex;
    justify-content: space-between;
    padding: 10px 30px;
    font-weight: 600;
    color: #0af;
  }
  nav .nav-item {
    cursor: pointer;
    padding: 6px 12px;
    border-radius: 8px;
    user-select: none;
  }
  nav .nav-item:hover,
  nav .nav-item.active {
    background: #0af;
    color: #121212;
  }
  .channel-list, .iptv-list {
    max-width: 900px;
    margin: 20px auto;
    padding: 20px;
    background: #222;
    border-radius: 15px;
    display: none;
    flex-direction: column;
    gap: 12px;
    color: #0af;
  }
  .channel-list.active, .iptv-list.active {
    display: flex;
  }
  .channel-list div, .iptv-list div {
    padding: 12px 15px;
    background: #111;
    border-radius: 8px;
    cursor: pointer;
    user-select: none;
    transition: background 0.2s ease;
  }
  .channel-list div:hover, .iptv-list div:hover {
    background: #0af;
    color: #121212;
  }
  @media (max-width: 600px) {
    .teams {
      flex-direction: column;
      font-size: 1rem;
      text-align: center;
      gap: 6px;
    }
    .vs {
      margin: 0 auto;
    }
    nav {
      padding: 10px 15px;
      font-size: 0.9rem;
    }
  }
  #video-modal {
    display:none;
    position:fixed;
    top:0; left:0; width:100%; height:100%;
    background:#000b;
    align-items:center;
    justify-content:center;
    z-index:9999;
  }
  #video-modal.active {
    display:flex;
  }
  #video-modal > div {
    position:relative;
    width:90%;
    max-width:720px;
  }
  #close-video {
    position:absolute;
    top:-30px;
    right:0;
    font-size:1.5rem;
    background:none;
    color:#0af;
    cursor:pointer;
    border:none;
  }
</style>
</head>
<body>

<header>Live Sports TV</header>

<div class="announcement-wrapper" aria-label="Announcement Bar">
  <div class="announcement" role="marquee" aria-live="polite" aria-atomic="true">
    Today's main match: Bangladesh vs India | Live starts at 8 PM | New channel added: Sports Plus |
  </div>
</div>

<div class="tabs" role="tablist" aria-label="Match Categories">
  <div class="tab active" data-tab="live" role="tab" aria-selected="true" tabindex="0">Live <span class="count" id="live-count">0</span></div>
  <div class="tab" data-tab="upcoming" role="tab" aria-selected="false" tabindex="-1">Upcoming <span class="count" id="upcoming-count">0</span></div>
  <div class="tab" data-tab="recent" role="tab" aria-selected="false" tabindex="-1">Recent Matches <span class="count" id="recent-count">0</span></div>
</div>

<div class="cards-container" aria-live="polite" aria-atomic="true">

  <article class="match-card live show" data-type="live" data-link="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8" aria-label="Live Match: Bangladesh vs India">
    <div class="teams"><div>Bangladesh</div><div class="vs">VS</div><div>India</div></div>
    <div class="live-animation" aria-label="Live animation"></div>
    <button class="watch-now" aria-label="Play Video">Watch Now</button>
  </article>

  <article class="match-card upcoming show" data-type="upcoming" data-endtime="2025-12-31T23:59:59+06:00" data-link="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8" aria-label="Upcoming Match: England vs Australia">
    <div class="teams"><div>England</div><div class="vs">VS</div><div>Australia</div></div>
    <div class="countdown">Time Left: <span class="timer">Loading...</span></div>
    <button class="watch-now" aria-label="Play Video" disabled>Watch Now</button>
  </article>

  <article class="match-card upcoming show" data-type="upcoming" data-endtime="2025-12-31T23:59:59+06:00" data-link="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8" aria-label="Upcoming Match: Pakistan vs New Zealand">
    <div class="teams"><div>Pakistan</div><div class="vs">VS</div><div>New Zealand</div></div>
    <div class="countdown">Time Left: <span class="timer">Loading...</span></div>
    <button class="watch-now" aria-label="Play Video" disabled>Watch Now</button>
  </article>

  <article class="match-card recent show" data-type="recent" data-endtime="2026-01-10T18:00:00+06:00" data-link="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8" aria-label="Recent Match: South Africa vs Sri Lanka">
    <div class="teams"><div>South Africa</div><div class="vs">VS</div><div>Sri Lanka</div></div>
    <div class="countdown">Time Left: <span class="timer">Loading...</span></div>
    <button class="watch-now" aria-label="Play Video" disabled>Watch Now</button>
  </article>

</div>

<div id="video-modal" role="dialog" aria-modal="true" aria-label="Video Player">
  <div>
    <button id="close-video" aria-label="Close Video">✖</button>
    <video id="video-player" width="100%" controls autoplay></video>
  </div>
</div>

<nav role="navigation" aria-label="Main Navigation">
  <div class="nav-item active" id="nav-home" tabindex="0" aria-current="page">Home</div>
  <div class="nav-item" id="nav-sports" tabindex="0">Sports TV</div>
  <div class="nav-item" id="nav-category" tabindex="0">Category</div>
</nav>

<div class="channel-list" id="sports-channels" aria-live="polite" aria-atomic="true" aria-label="Sports TV Channel List">
  <div data-link="https://ptv.example.com" tabindex="0">PTV</div>
  <div data-link="https://sportsplus.example.com" tabindex="0">Sports Plus</div>
  <div data-link="https://livecricket24.example.com" tabindex="0">Live Cricket 24</div>
  <div data-link="https://sportsnetwork.example.com" tabindex="0">Sports Network</div>
</div>

<div class="iptv-list" id="iptv-list" aria-live="polite" aria-atomic="true" aria-label="IPTV Channel List">
  <div data-link="https://iptvchannel1.example.com" tabindex="0">IPTV Channel 1</div>
  <div data-link="https://iptvchannel2.example.com" tabindex="0">IPTV Channel 2</div>
  <div data-link="https://iptvchannel3.example.com" tabindex="0">IPTV Channel 3</div>
  <div data-link="https://iptvchannel4.example.com" tabindex="0">IPTV Channel 4</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
  const tabs = document.querySelectorAll('.tab');
  const allMatchCards = document.querySelectorAll('.match-card');
  const liveCountSpan = document.getElementById('live-count');
  const upcomingCountSpan = document.getElementById('upcoming-count');
  const recentCountSpan = document.getElementById('recent-count');

  const videoModal = document.getElementById('video-modal');
  const videoPlayer = document.getElementById('video-player');
  const closeVideoBtn = document.getElementById('close-video');

  const navHome = document.getElementById('nav-home');
  const navSports = document.getElementById('nav-sports');
  const navCategory = document.getElementById('nav-category');

  const sportsChannels = document.getElementById('sports-channels');
  const iptvList = document.getElementById('iptv-list');

  // Tab activation function
  function activateTab(selectedTab) {
    tabs.forEach(tab => {
      tab.classList.toggle('active', tab.dataset.tab === selectedTab);
      tab.setAttribute('aria-selected', tab.dataset.tab === selectedTab ? 'true' : 'false');
      tab.setAttribute('tabindex', tab.dataset.tab === selectedTab ? '0' : '-1');
    });
    allMatchCards.forEach(card => {
      card.classList.toggle('show', card.dataset.type === selectedTab);
    });
  }
  activateTab('live');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => activateTab(tab.dataset.tab));
    tab.addEventListener('keydown', e => {
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        activateTab(tab.dataset.tab);
      }
    });
  });

  // Update counts
  function updateCounts() {
    const liveMatches = [...allMatchCards].filter(c => c.dataset.type === 'live');
    const upcomingMatches = [...allMatchCards].filter(c => c.dataset.type === 'upcoming');
    const recentMatches = [...allMatchCards].filter(c => c.dataset.type === 'recent');

    liveCountSpan.textContent = liveMatches.length;
    upcomingCountSpan.textContent = upcomingMatches.length;
    recentCountSpan.textContent = recentMatches.length;

    document.querySelector('.tab[data-tab="live"] .count').textContent = liveMatches.length || '';
    document.querySelector('.tab[data-tab="upcoming"] .count').textContent = upcomingMatches.length || '';
    document.querySelector('.tab[data-tab="recent"] .count').textContent = recentMatches.length || '';
  }
  updateCounts();

  // Countdown update every second
  function updateCountdowns() {
    const now = new Date();
    allMatchCards.forEach(card => {
      if(card.dataset.type === 'upcoming' || card.dataset.type === 'recent'){
        const endtimeStr = card.dataset.endtime;
        if(!endtimeStr) return;
        const endtime = new Date(endtimeStr);
        const timerSpan = card.querySelector('.countdown .timer');
        const watchBtn = card.querySelector('.watch-now');
        let diff = endtime - now;
        if(diff <= 0){
          if(card.dataset.type === 'upcoming'){
            card.dataset.type = 'live';
            card.classList.remove('upcoming');
            card.classList.add('live');
            watchBtn.disabled = false;
            card.querySelector('.countdown').style.display = 'none';
            if(!card.querySelector('.live-animation')) {
              const liveAnim = document.createElement('div');
              liveAnim.className = 'live-animation';
              liveAnim.setAttribute('aria-label', 'Live animation');
              card.insertBefore(liveAnim, watchBtn);
            }
          } else if(card.dataset.type === 'recent'){
            card.classList.remove('show');
          }
          updateCounts();
        } else {
          const hours = Math.floor(diff / (1000 * 60 * 60));
          const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((diff % (1000 * 60)) / 1000);
          timerSpan.textContent = `${hours}h ${minutes}m ${seconds}s`;
          watchBtn.disabled = true;
        }
      }
    });
  }
  setInterval(updateCountdowns, 1000);
  updateCountdowns();

  // Video play with HLS support
  allMatchCards.forEach(card => {
    const btn = card.querySelector('.watch-now');
    btn.addEventListener('click', () => {
      const videoSrc = card.dataset.link;
      if (!videoSrc) return;

      if (Hls.isSupported() && videoSrc.endsWith('.m3u8')) {
        if (window.hls) {
          window.hls.destroy();
        }
        const hls = new Hls();
        window.hls = hls;
        hls.loadSource(videoSrc);
        hls.attachMedia(videoPlayer);
        hls.on(Hls.Events.MANIFEST_PARSED, () => {
          videoPlayer.play();
        });
      } else if (videoPlayer.canPlayType('application/vnd.apple.mpegurl')) {
        videoPlayer.src = videoSrc;
        videoPlayer.play();
      } else {
        videoPlayer.src = videoSrc;
        videoPlayer.play();
      }

      videoModal.classList.add('active');
    });
  });

  // Close video modal
  closeVideoBtn.addEventListener('click', () => {
    videoPlayer.pause();
    videoPlayer.src = '';
    videoModal.classList.remove('active');
  });

  videoModal.addEventListener('click', e => {
    if(e.target === videoModal){
      videoPlayer.pause();
      videoPlayer.src = '';
      videoModal.classList.remove('active');
    }
  });

  // Navigation bar click handlers
  function clearActiveNav(){
    [navHome, navSports, navCategory].forEach(nav => nav.classList.remove('active'));
    sportsChannels.classList.remove('active');
    iptvList.classList.remove('active');
    document.querySelector('.cards-container').style.display = 'flex';
  }

  navHome.addEventListener('click', () => {
    clearActiveNav();
    navHome.classList.add('active');
    document.querySelector('.cards-container').style.display = 'flex';
  });

  navSports.addEventListener('click', () => {
    clearActiveNav();
    navSports.classList.add('active');
    document.querySelector('.cards-container').style.display = 'none';
    sportsChannels.classList.add('active');
  });

  navCategory.addEventListener('click', () => {
    clearActiveNav();
    navCategory.classList.add('active');
    document.querySelector('.cards-container').style.display = 'none';
    iptvList.classList.add('active');
  });

  // Sports TV channels click open link in new tab
  sportsChannels.querySelectorAll('div').forEach(ch => {
    ch.addEventListener('click', () => {
      const link = ch.dataset.link;
      if(link) window.open(link, '_blank');
    });
  });

  // IPTV channels click open link in new tab
  iptvList.querySelectorAll('div').forEach(ch => {
    ch.addEventListener('click', () => {
      const link = ch.dataset.link;
      if(link) window.open(link, '_blank');
    });
  });
</script>

</body>
</html>
